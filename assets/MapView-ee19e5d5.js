import{_}from"./index-00759e4a.js";import{e as r,y as h,a as x,v as $,bU as F,M as T,cf as pt,ah as Q,gu as zt,bz as tt,R as P,l as S,$ as H,a1 as b,gv as Qt,ch as te,gw as ct,bP as It,p as M,gx as ee,gy as ie,N as se,w as Nt,dc as ae,eU as _t,aD as ne,dr as oe,aL as re,ac as et,gz as he,aC as le,bD as V,bE as dt,cn as J,aa as At,h as Zt,gA as pe,ci as ce,cj as de,gB as ue,gC as me,cd as U,gD as B,gE as ge,cI as _e,gF as wt,gG as we,ab as vt,ai as yt,co as ve,cp as ye,cq as fe,cr as Te,cs as Se,ct as xe,cu as be,cv as ft,aw as K,fk as Ve,at as Me,ax as Re,fl as De,fm as Oe,fn as ke,eW as Pe,j as $e,fp as Ee,gH as Le,a3 as Tt,dX as Ce,gI as St,gJ as ze,gK as Ie,gL as xt,aJ as G,cb as Ne,gM as Ae,fu as bt,fv as Vt,fw as Ze,fx as Ge,gN as qe,gO as Ue,fA as je,cU as Mt,gP as Fe,da as He,gQ as Ke,gR as Rt,K as Be,gS as We,fG as Dt,gT as Ot,ba as z,c1 as Ye,fM as Xe}from"./calcite-8912bd40.js";import{t as it,r as Je}from"./unitBezier-881ac1eb.js";import"./TileStrategy-90354c21.js";import{h as Qe}from"./TileInfoView-9dfc6c79.js";import{d as ti}from"./TileStore-9a3ccc75.js";let ei=class{constructor(t,i,s,a){const n=t.targetGeometry,o=i.targetGeometry;a?typeof a=="string"&&(a=Je(a)||it.ease):a=it.ease,this.easing=a,this.duration=s,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let a,n,o,l;i>=1?(a=this.tCenterX,n=this.tCenterY,o=this.tRotation,l=this.tScale):(a=this.sCenterX+s*this.dCenterX,n=this.sCenterY+s*this.dCenterY,o=this.sRotation+s*this.dRotation,l=this.sScale+s*this.dScale),t.targetGeometry.x=a,t.targetGeometry.y=n,t.scale=l,t.rotation=o}},R=class extends ${constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=it.ease,this.view=null,this.viewpoint=new F({targetGeometry:new T,scale:0,rotation:0}),this._updateTask=pt({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Q(this._updateTask)}animate(t,i,s){this.stop();const a=this.viewpoint;zt(a,i),this.transition=new ei(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const n=()=>{var o,l;this.animation===t&&this._updateTask&&(t.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(l=this.view)!=null&&l.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new tt({target:t.clone()}),a=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var s,a;const i=this.animation;if(i&&i.state!==tt.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const n=this.transition,o=(performance.now()-this._startTime)/n.duration,l=o>=1;n.applyRatio(this.viewpoint,o),l&&((s=this.animation)==null||s.finish())}(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};r([h()],R.prototype,"animation",void 0),r([h()],R.prototype,"duration",void 0),r([h()],R.prototype,"transition",void 0),r([h()],R.prototype,"easing",void 0),r([h()],R.prototype,"view",void 0),r([h()],R.prototype,"viewpoint",void 0),R=r([x("esri.views.2d.AnimationManager")],R);const ii=R;let si=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var l;this._updateRequested=!1;const{basemapView:i,graphicsView:s,labelManager:a,layerViews:n,state:{id:o}}=this.view;i==null||i.baseLayerViews.forEach(this._updateLayerView,this),n.forEach(this._updateLayerView,this),i==null||i.referenceLayerViews.forEach(this._updateLayerView,this),P(a)&&(a.lastUpdateId!==o&&(a.viewChange(),a.lastUpdateId=o),a.updateRequested&&a.processUpdate(this._updateParameters)),P(s)&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((l=this._frameTaskHandle)==null||l.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=S(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=pt(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}};function v(){return Promise.all([_(()=>import("./webglDeps-7085b7aa.js"),["assets/webglDeps-7085b7aa.js","assets/FramebufferObject-8b18fc0c.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/Program-77209250.js","assets/ProgramCache-f29c900e.js","assets/NestedMap-1b5db22e.js","assets/ShaderCompiler-77d0dcb6.js","assets/programUtils-f035fe8a.js","assets/ProgramTemplate-646e3fe5.js"]),_(()=>import("./mapViewDeps-437c1fb1.js"),["assets/mapViewDeps-437c1fb1.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/CIMResourceManager-f4862aa2.js","assets/Rasterizer-76d04c43.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/alignmentUtils-ae955d28.js","assets/definitions-3ddd14a8.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/rasterizingUtils-c992e204.js","assets/imageutils-68b5fcaa.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/BufferPool-c2abe131.js","assets/enums-b1d611e3.js","assets/WGLContainer-9a32a1e6.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/VTLMaterialManager-18d63fe3.js","assets/enums-fb086c25.js","assets/programUtils-f035fe8a.js","assets/MagnifierPrograms-8114656e.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-edd903b3.js","assets/webgl-debug-7f880832.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/ZoomMomentumEstimator-ef57e6a4.js","assets/MaterialPrograms-eb26b2c2.js","assets/RenderingContext-0f21aa0e.js","assets/ProgramCache-f29c900e.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/basicInterfaces-7449a8bf.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-685c4cd4.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/GraphicsView-d1a40b68.js","assets/GraphicContainer-f82c4282.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/resources-7587d8f4.js","assets/requestImageUtils-d1ba3b36.js","assets/unitBezier-881ac1eb.js"])])}const q=()=>v().then(()=>_(()=>import("./TileLayerView2D-07afc913.js"),["assets/TileLayerView2D-07afc913.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/Rasterizer-76d04c43.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/alignmentUtils-ae955d28.js","assets/definitions-3ddd14a8.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/rasterizingUtils-c992e204.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/BufferPool-c2abe131.js","assets/enums-b1d611e3.js","assets/WGLContainer-9a32a1e6.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-8114656e.js","assets/imageutils-68b5fcaa.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-edd903b3.js","assets/webgl-debug-7f880832.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/ZoomMomentumEstimator-ef57e6a4.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/basicInterfaces-7449a8bf.js","assets/GraphicsView2D-685c4cd4.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/GraphicsView-d1a40b68.js","assets/vec3f32-01c06d8d.js","assets/imageUtils-4b176025.js","assets/BitmapTileContainer-2aeebe21.js","assets/Bitmap-b524c69a.js","assets/TileContainer-13a45e9d.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/HighlightGraphicContainer-ac5d0f85.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/MapServiceLayerViewHelper-ee55984a.js","assets/scaleUtils-d13015f2.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-43bc6a74.js","assets/popupUtils-54bd9deb.js","assets/drapedUtils-08d2401b.js","assets/unitBezier-881ac1eb.js"])),I=()=>v().then(()=>_(()=>import("./FeatureLayerView2D-aa4f07e4.js"),["assets/FeatureLayerView2D-aa4f07e4.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/schemaUtils-595294e3.js","assets/enums-b1d611e3.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-8b171ac3.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-a5773450.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/ExpandedCIM-be73cc27.js","assets/util-2ff47657.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/FeatureLayerView-36f7cadb.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js"])),kt={"base-dynamic":()=>v().then(()=>_(()=>import("./BaseDynamicLayerView2D-156b77db.js"),["assets/BaseDynamicLayerView2D-156b77db.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/BitmapContainer-ba2ab01d.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/ExportStrategy-cf49dd17.js","assets/Bitmap-b524c69a.js","assets/TileInfoView-9dfc6c79.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js"])),"base-tile":q,"bing-maps":q,csv:I,"geo-rss":()=>v().then(()=>_(()=>import("./GeoRSSLayerView2D-6cc218ea.js"),["assets/GeoRSSLayerView2D-6cc218ea.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/LayerView2D-638c55c1.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/ClipRect-59ab066a.js","assets/GraphicContainer-f82c4282.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-a5773450.js","assets/FramebufferObject-8b18fc0c.js","assets/TileContainer-13a45e9d.js","assets/WGLContainer-9a32a1e6.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/vec3f32-01c06d8d.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js"])),feature:I,geojson:I,graphics:()=>v().then(()=>_(()=>import("./GraphicsLayerView2D-dbd074b9.js"),["assets/GraphicsLayerView2D-dbd074b9.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/LayerView2D-638c55c1.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/ClipRect-59ab066a.js","assets/GraphicContainer-f82c4282.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-a5773450.js","assets/FramebufferObject-8b18fc0c.js","assets/TileContainer-13a45e9d.js","assets/WGLContainer-9a32a1e6.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/vec3f32-01c06d8d.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js"])),group:()=>v().then(()=>_(()=>import("./GroupLayerView2D-776f4470.js"),["assets/GroupLayerView2D-776f4470.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/GroupContainer-a2fc1581.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/GroupLayerView-3a4ee2ca.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js"])),imagery:()=>v().then(()=>_(()=>import("./ImageryLayerView2D-eb2fce5b.js"),["assets/ImageryLayerView2D-eb2fce5b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/RasterVFDisplayObject-329343da.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-ebdea6e9.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/definitions-3ddd14a8.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/WGLContainer-9a32a1e6.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/HighlightGraphicContainer-ac5d0f85.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/BitmapContainer-ba2ab01d.js","assets/Bitmap-b524c69a.js","assets/ExportStrategy-cf49dd17.js","assets/rasterProjectionHelper-664970f2.js","assets/ImageryLayerView-96ac5e24.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js"])),"imagery-tile":()=>v().then(()=>_(()=>import("./ImageryTileLayerView2D-4536be0b.js"),["assets/ImageryTileLayerView2D-4536be0b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/multidimensionalUtils-901f34cd.js","assets/RasterVFDisplayObject-329343da.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-ebdea6e9.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/definitions-3ddd14a8.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/WGLContainer-9a32a1e6.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/rasterUtils-7694cc98.js","assets/TiledDisplayObject-419c008b.js","assets/TileContainer-13a45e9d.js","assets/RawBlockCache-d2860079.js","assets/rasterProjectionHelper-664970f2.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/util-2ff47657.js","assets/ImageryTileLayerView-15bc95f1.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js"])),kml:()=>v().then(()=>_(()=>import("./KMLLayerView2D-30c9a5de.js"),["assets/KMLLayerView2D-30c9a5de.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/kmlUtils-877a4324.js","assets/Bitmap-b524c69a.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/BitmapContainer-ba2ab01d.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/GraphicContainer-f82c4282.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/LayerView-abbb3570.js","assets/rasterProjectionHelper-664970f2.js","assets/MaterialPrograms-eb26b2c2.js","assets/programUtils-f035fe8a.js","assets/rasterUtils-7694cc98.js","assets/RenderingContext-0f21aa0e.js","assets/ProgramCache-f29c900e.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/basicInterfaces-7449a8bf.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/webgl-debug-7f880832.js","assets/unitBezier-881ac1eb.js"])),"knowledge-graph":()=>v().then(()=>_(()=>import("./KnowledgeGraphLayerView2D-9c8ee537.js"),["assets/KnowledgeGraphLayerView2D-9c8ee537.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/LayerView2D-638c55c1.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/ClipRect-59ab066a.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js"])),"link-chart":()=>v().then(()=>_(()=>import("./KnowledgeGraphLayerView2D-9c8ee537.js"),["assets/KnowledgeGraphLayerView2D-9c8ee537.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/LayerView2D-638c55c1.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/ClipRect-59ab066a.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js"])),"knowledge-graph-sublayer":I,"map-image":()=>v().then(()=>_(()=>import("./MapImageLayerView2D-6b49fb30.js"),["assets/MapImageLayerView2D-6b49fb30.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/BitmapContainer-ba2ab01d.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/HighlightGraphicContainer-ac5d0f85.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/ExportStrategy-cf49dd17.js","assets/Bitmap-b524c69a.js","assets/LayerView-abbb3570.js","assets/MapImageLayerView-90b22327.js","assets/ExportImageParameters-99094deb.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-43bc6a74.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/MapServiceLayerViewHelper-ee55984a.js","assets/scaleUtils-d13015f2.js","assets/popupUtils-54bd9deb.js","assets/drapedUtils-08d2401b.js","assets/unitBezier-881ac1eb.js"])),"map-notes":()=>v().then(()=>_(()=>import("./MapNotesLayerView2D-e5024396.js"),["assets/MapNotesLayerView2D-e5024396.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/GroupContainer-a2fc1581.js","assets/WGLContainer-9a32a1e6.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/GraphicContainer-f82c4282.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js"])),media:()=>v().then(()=>_(()=>import("./MediaLayerView2D-bff24e9e.js"),["assets/MediaLayerView2D-bff24e9e.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/MediaElementView-06baa4d4.js","assets/mat3f64-50f3b9f6.js","assets/normalizeUtilsSync-3ea564a9.js","assets/Rasterizer-76d04c43.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/alignmentUtils-ae955d28.js","assets/definitions-3ddd14a8.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/rasterizingUtils-c992e204.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/BufferPool-c2abe131.js","assets/enums-b1d611e3.js","assets/WGLContainer-9a32a1e6.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-8114656e.js","assets/imageutils-68b5fcaa.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-edd903b3.js","assets/webgl-debug-7f880832.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/ZoomMomentumEstimator-ef57e6a4.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/basicInterfaces-7449a8bf.js","assets/GraphicsView2D-685c4cd4.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/GraphicsView-d1a40b68.js","assets/vec3f32-01c06d8d.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js"])),"ogc-feature":()=>v().then(()=>_(()=>import("./OGCFeatureLayerView2D-39d81245.js"),["assets/OGCFeatureLayerView2D-39d81245.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/FeatureLayerView2D-aa4f07e4.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/schemaUtils-595294e3.js","assets/enums-b1d611e3.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-8b171ac3.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-a5773450.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/ExpandedCIM-be73cc27.js","assets/util-2ff47657.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/FeatureLayerView-36f7cadb.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/OGCFeatureLayerView-f0048231.js"])),"open-street-map":q,"oriented-imagery":I,route:()=>v().then(()=>_(()=>import("./RouteLayerView2D-7a6f6cb8.js"),["assets/RouteLayerView2D-7a6f6cb8.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/Stop-3cbfb43d.js","assets/LayerView2D-638c55c1.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/ClipRect-59ab066a.js","assets/GraphicContainer-f82c4282.js","assets/enums-b1d611e3.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/visualVariablesUtils-b968e7b0.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-a5773450.js","assets/FramebufferObject-8b18fc0c.js","assets/TileContainer-13a45e9d.js","assets/WGLContainer-9a32a1e6.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/vec3f32-01c06d8d.js","assets/GraphicsView2D-685c4cd4.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/GraphicsView-d1a40b68.js","assets/LayerView-abbb3570.js","assets/unitBezier-881ac1eb.js"])),stream:()=>v().then(()=>_(()=>import("./StreamLayerView2D-1bc47f4b.js"),["assets/StreamLayerView2D-1bc47f4b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/FeatureLayerView2D-aa4f07e4.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/schemaUtils-595294e3.js","assets/enums-b1d611e3.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-8b171ac3.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-a5773450.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/ExpandedCIM-be73cc27.js","assets/util-2ff47657.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/FeatureLayerView-36f7cadb.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js"])),"subtype-group":()=>v().then(()=>_(()=>import("./SubtypeGroupLayerView2D-3d6d5487.js"),["assets/SubtypeGroupLayerView2D-3d6d5487.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/FeatureLayerView2D-aa4f07e4.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/definitions-3ddd14a8.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/schemaUtils-595294e3.js","assets/enums-b1d611e3.js","assets/color-e324e445.js","assets/enums-4b2a86a0.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-8b171ac3.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-a5773450.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/ExpandedCIM-be73cc27.js","assets/util-2ff47657.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/FeatureLayerView-36f7cadb.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js"])),tile:q,"vector-tile":()=>v().then(()=>_(()=>import("./VectorTileLayerView2D-3c1aa23b.js"),["assets/VectorTileLayerView2D-3c1aa23b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/enums-fb086c25.js","assets/TileInfoViewPOT-d2612f57.js","assets/Rect-ea14f53a.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/rasterizingUtils-c992e204.js","assets/floatRGBA-ca2b39ca.js","assets/config-1337d16e.js","assets/VectorTile-d41a1f0f.js","assets/FramebufferObject-8b18fc0c.js","assets/TiledDisplayObject-419c008b.js","assets/DisplayObject-87c37b69.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/TileInfoView-9dfc6c79.js","assets/enums-b1d611e3.js","assets/TileContainer-13a45e9d.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/number-b10bd8f5.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/earcut-61f7b102.js","assets/StyleRepository-4d79813f.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/unitBezier-881ac1eb.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/LayerView-abbb3570.js"])),wcs:()=>v().then(()=>_(()=>import("./ImageryTileLayerView2D-4536be0b.js"),["assets/ImageryTileLayerView2D-4536be0b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/multidimensionalUtils-901f34cd.js","assets/RasterVFDisplayObject-329343da.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-ebdea6e9.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/definitions-3ddd14a8.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/WGLContainer-9a32a1e6.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/rasterUtils-7694cc98.js","assets/TiledDisplayObject-419c008b.js","assets/TileContainer-13a45e9d.js","assets/RawBlockCache-d2860079.js","assets/rasterProjectionHelper-664970f2.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/util-2ff47657.js","assets/ImageryTileLayerView-15bc95f1.js","assets/popupUtils-54bd9deb.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js"])),"web-tile":q,wfs:I,wms:()=>v().then(()=>_(()=>import("./WMSLayerView2D-b00d686b.js"),["assets/WMSLayerView2D-b00d686b.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/BitmapContainer-ba2ab01d.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/earcut-61f7b102.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/ExportStrategy-cf49dd17.js","assets/Bitmap-b524c69a.js","assets/TileInfoView-9dfc6c79.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/WMSLayerView-a3d25dbf.js","assets/ExportWMSImageParameters-d52d2b49.js","assets/unitBezier-881ac1eb.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js"])),wmts:()=>v().then(()=>_(()=>import("./WMTSLayerView2D-a744da5f.js"),["assets/WMTSLayerView2D-a744da5f.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/imageUtils-4b176025.js","assets/BitmapTileContainer-2aeebe21.js","assets/Bitmap-b524c69a.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/TiledDisplayObject-419c008b.js","assets/WGLContainer-9a32a1e6.js","assets/definitions-3ddd14a8.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/enums-b1d611e3.js","assets/number-b10bd8f5.js","assets/StyleDefinition-7d58136b.js","assets/enums-4b2a86a0.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/alignmentUtils-ae955d28.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/Container-0797c889.js","assets/earcut-61f7b102.js","assets/TileContainer-13a45e9d.js","assets/LayerView2D-638c55c1.js","assets/ClipRect-59ab066a.js","assets/TileInfoView-9dfc6c79.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/LayerView-abbb3570.js","assets/RefreshableLayerView-e4d9e9c9.js","assets/unitBezier-881ac1eb.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function ai(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new b(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const Pt={hasLayerViewModule:e=>P(kt[e.type]),importLayerView:e=>{const t=kt[e.type];if(H(t))throw ai(e);return t(e)}};function ni(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let a=Number.POSITIVE_INFINITY,n=0,o=0;const l=[0,0],c=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const d of c)for(let p=0;p<d.length-1;p++){Qt(l,s,d,p);const m=te(s,l);m<a&&(a=m,n=l[0],o=l[1])}return{coordinate:new T({x:n,y:o,spatialReference:i}),distance:a}}var st;let C=st=class extends ct($){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(H(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return It(this.geometry,this.spatialReference)}catch(e){return M.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(H(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?ee(this.normalizedGeometry,i):ie(this.normalizedGeometry,i))return e;const{coordinate:s}=ni(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,t;return new st({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};r([h({constructOnly:!0})],C.prototype,"geometry",void 0),r([h({readOnly:!0})],C.prototype,"normalizedGeometry",null),r([h({constructOnly:!0})],C.prototype,"spatialReference",void 0),C=st=r([x("esri.views.2d.constraints.GeometryConstraint")],C);var at;let j=at=class extends ct($){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new at({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};r([h()],j.prototype,"enabled",void 0),r([h()],j.prototype,"rotationEnabled",void 0),j=at=r([x("esri.views.2d.constraints.RotationConstraint")],j);const Gt=j;var nt;let y=nt=class extends ct($){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:a,maxZoom:n}=this,o=-1,l=-1,c=!1,d=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(p=>p.clone()),t.sort((p,m)=>m.scale-p.scale),t.forEach((p,m)=>p.level=m);for(const p of t)!c&&i>0&&i>=p.scale&&(o=p.level,c=!0),!d&&s>0&&s>=p.scale&&(l=e?e.level:-1,d=!0),e=p;a===-1&&(a=i===0?0:o),n===-1&&(n=s===0?t.length-1:l),a=Math.max(a,0),a=Math.min(a,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),a>n&&([a,n]=[n,a]),i=t[a].scale,s=t[n].scale,t.splice(0,a),t.splice(n-a+1,t.length),t.forEach((p,m)=>{this._lodByScale[p.scale]=p,this._scales[m]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,a=e.targetGeometry,n=t&&t.targetGeometry,o=s!==0&&e.scale<s,l=i!==0&&e.scale>i;if(o||l){const c=l?i:s;if(t&&n){const d=(c-t.scale)/(e.scale-t.scale);a.x=n.x+(a.x-n.x)*d,a.y=n.y+(a.y-n.y)*d}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let a=0;a<t.length-1;a++){if(i=t[a],s=t[a+1],s===e)return a+this.effectiveMinZoom+1;if(i>e&&s<e)return a+this.effectiveMinZoom+1-(e-s)/(i-s)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new nt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};r([h({readOnly:!0})],y.prototype,"effectiveLODs",void 0),r([h({readOnly:!0})],y.prototype,"effectiveMinZoom",void 0),r([h({readOnly:!0})],y.prototype,"effectiveMaxZoom",void 0),r([h({readOnly:!0})],y.prototype,"effectiveMinScale",void 0),r([h({readOnly:!0})],y.prototype,"effectiveMaxScale",void 0),r([h()],y.prototype,"lods",void 0),r([h()],y.prototype,"minZoom",void 0),r([h()],y.prototype,"maxZoom",void 0),r([h()],y.prototype,"minScale",void 0),r([h()],y.prototype,"maxScale",void 0),r([h()],y.prototype,"snapToZoom",void 0),y=nt=r([x("esri.views.2d.constraints.ZoomConstraint")],y);const qt=y,oi={base:null,key:"type",typeMap:{extent:Nt,polygon:ae}};let w=class extends ${constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,s;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _defaultLODs(){var s,a,n;const t=(a=(s=this.view)==null?void 0:s.defaultsFromMap)==null?void 0:a.tileInfo,i=(n=this.view)==null?void 0:n.spatialReference;return t&&i&&t.spatialReference.equals(i)?t.lods:null}get _geometry(){var t;return new C({geometry:this.geometry,spatialReference:(t=this.view)==null?void 0:t.spatialReference})}get _rotation(){return new Gt({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),i=this.lods||this._defaultLODs,s=this.minZoom,a=this.maxZoom,n=this.minScale,o=this.maxScale,l=this.snapToZoom;return t&&t.lods===i&&t.minZoom===s&&t.maxZoom===a&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===l?t:new qt({lods:i,minZoom:s,maxZoom:a,minScale:n,maxScale:o,snapToZoom:l})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};r([h({readOnly:!0})],w.prototype,"effectiveLODs",null),r([h({readOnly:!0})],w.prototype,"effectiveMinScale",null),r([h({readOnly:!0})],w.prototype,"effectiveMaxScale",null),r([h({readOnly:!0})],w.prototype,"effectiveMinZoom",null),r([h({readOnly:!0})],w.prototype,"effectiveMaxZoom",null),r([h({types:oi,value:null})],w.prototype,"geometry",null),r([h({type:[se]})],w.prototype,"lods",void 0),r([h()],w.prototype,"minScale",void 0),r([h()],w.prototype,"maxScale",void 0),r([h()],w.prototype,"minZoom",void 0),r([h()],w.prototype,"maxZoom",void 0),r([h()],w.prototype,"rotationEnabled",void 0),r([h()],w.prototype,"snapToZoom",void 0),r([h()],w.prototype,"view",void 0),r([h({readOnly:!0})],w.prototype,"version",null),r([h()],w.prototype,"_defaultLODs",null),r([h({type:C})],w.prototype,"_geometry",null),r([h({type:Gt})],w.prototype,"_rotation",null),r([h({readOnly:!0,type:qt})],w.prototype,"_zoom",null),w=r([x("esri.views.2d.MapViewConstraints")],w);const Ut=w;var ot,rt;let D=ot=class extends ${constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new ot({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};r([h()],D.prototype,"left",void 0),r([h()],D.prototype,"top",void 0),r([h()],D.prototype,"right",void 0),r([h()],D.prototype,"bottom",void 0),D=ot=r([x("esri.views.2d.PaddedViewState.Padding")],D);let N=rt=class extends _t{constructor(...e){super(...e),this.paddedViewState=new _t,this._updateContent=(()=>{const t=le();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const a=this.paddedViewState;ne(t,s.left+s.right,s.top+s.bottom),oe(t,i,t),re(a.size,t);const n=a.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(S(()=>[this.size,this.padding],()=>this._updateContent(),et)),this.padding=new D,this.size=[0,0]}set padding(e){this._set("padding",e||new D)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,he(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new rt({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};r([h()],N.prototype,"paddedViewState",void 0),r([h({type:D})],N.prototype,"padding",null),r([h()],N.prototype,"viewpoint",null),N=rt=r([x("esri.views.2d.PaddedViewState")],N);const ri=N;let $t=class extends V{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){dt(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},hi=class extends V{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:a,delta:n}=i,{view:o}=this,{mapViewNavigation:l}=o;switch(a){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=n,l.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const c=1.015**n.y,d=this._startScale*c,p=d/this._currentScale;l.setViewpointImmediate(p),this._currentScale=d;break}case"end":{const{constraints:c}=o,{effectiveLODs:d,snapToZoom:p}=c;if(!p||!d)return void l.end();const m=c.snapScale(this._currentScale),f=(n.y>0?Math.max(m,c.snapToPreviousScale(this._startScale)):Math.min(m,c.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(f);break}}}};class li extends V{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new J({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&dt(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}let pi=class extends V{constructor(t,i,s){super(!0),this._view=t,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new J({start:(n,o)=>{a.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{a.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{a.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&dt(o.data,this.pointerAction)}),this.registerIncoming("drag",s,n=>this._dragEventSeparator.handle(n))}};class ci extends V{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new At,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([S(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=pt({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Zt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,pe(this._transformation)):(this._currentDevice=t.data.device,ce(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(de(i))return;const s=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,n=ui*a*t;ue(s,s,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*mi*t,l=this._view.constraints.rotationEnabled?-i.heading*di*t:0,c=this._view.size,d=[c[0]/2,c[1]];me(s,s,o,l,d,c);const p=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=p}}const di=.06,ui=.7,mi=6e-4;let gi=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=this._keyMap[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},_i=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[t.data.key];if(this._pressed=a!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var A;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(A||(A={}));let wi=class extends V{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=A.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=A.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const a=this._keysToZoomAction[s],{mapViewNavigation:n}=this.view;let o=null;switch(a){case A.IN:o=n.zoomIn();break;case A.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const vi=.6;class yi extends V{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:a,deltaY:n}=t.data,o=1/vi**(1/60*n),l=i.zoom(o,[s,a]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}let fi=class extends V{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new J({start:(s,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(s,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(s,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}},Ti=class extends V{constructor(t=B.maximumDoubleClickDelay,i=B.maximumDoubleClickDistance,s=B.maximumDoubleTouchDelay,a=B.maximumDoubleTouchDistance,n=ge){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=U(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new J({start:(o,l)=>this._dragStart(o,l),update:(o,l)=>this._dragUpdate(l),end:(o,l)=>this._dragEnd(l)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Q(t.doubleTapTimeout)})}get hasPendingInputs(){return _e(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Q(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,s){const{button:a,buttons:n,pointer:o,pointers:l,pointerType:c,timestamp:d}=s;return{action:t,delta:i,button:a,buttons:n,pointer:o,pointers:l,pointerType:c,timestamp:d}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:a}=i,{center:n}=s;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",U(0,0),s);this._doubleTapDrag.emit(o,void 0,a),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:a}=i,n=U(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,i);this._doubleTapDrag.emit(o,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:a}=i,n=U(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,i);this._doubleTapDrag.emit(o,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=wt(i),a=this._pointerState.get(s),{pointerType:n}=i.native;if(a){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),we(a.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,a=wt(i),n=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(a),n);this._pointerState.set(a,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};const W={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let E=class extends ${constructor(){super(...arguments),this._handles=new At}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([vt(()=>!e(),()=>this._disconnect()),vt(e,()=>this._connect())])}destroy(){this._handles=yt(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=yt(this._inputManager)}_connect(){const e=this.view.surface,t=new ve(e,this.view.input),i=[new ye,new fe,new Te,new Se(this.view.navigation),new Ti],s=new xe({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new be],ft.INTERNAL),s.installHandlers("navigation",[new fi(this.view),new ci(this.view),new yi(this.view),new $t(this.view),new $t(this.view,[W.counter]),new li(this.view,"primary"),new gi(this.view,W.pan),new wi(this.view,W.zoom),new _i(this.view,W.rotate),new pi(this.view,"secondary"),new hi(this.view,"touch")],ft.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,S(()=>{var a,n;return(n=(a=this.view)==null?void 0:a.navigation)==null?void 0:n.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Zt)}get test(){return{inputManager:this._inputManager}}};r([h()],E.prototype,"view",void 0),r([h()],E.prototype,"latestPointerType",null),r([h()],E.prototype,"latestPointerLocation",null),r([h()],E.prototype,"multiTouchActive",null),E=r([x("esri.views.2d.input.MapViewInputManager")],E);const Si=E;let L=class extends ${constructor(){super(...arguments),this.color=new K([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};r([h({type:K})],L.prototype,"color",void 0),r([h({type:K})],L.prototype,"haloColor",void 0),r([h()],L.prototype,"haloOpacity",void 0),r([h()],L.prototype,"fillOpacity",void 0),L=r([x("esri.views.2d.support.HighlightOptions")],L);const jt=L,xi=e=>e.includes("Brush");let Ft=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),xi(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function bi(e,t,i,s,a,n,o,l){e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let c=null;e.width!=null&&e.height!=null?c=[e.width,e.height]:e.width==null&&e.height!=null?c=[e.height,e.height]:e.width!=null&&e.height==null?c=[e.width,e.width]:e.width==null&&e.height==null&&(c=null);const d=i[0]-(s.left+s.right),p=i[1]-(s.top+s.bottom);let m,f,g=e.area||{x:0,y:0,width:d,height:p};if(c){const O=d/p,Z=c[0]/c[1];if(Z>O){const k=g.width/Z;g={x:g.x,y:Math.round(g.y+(g.height-k)/2),width:g.width,height:Math.round(k)}}else{const k=g.height*Z;g={x:Math.round(g.x+(g.width-k)/2),y:g.y,width:Math.round(k),height:g.height}}}else c=[g.width,g.height];return c[0]>g.width?(m=Math.min(c[0]/g.width,t),f=c[0]/g.width/m):(m=1,f=c[0]/g.width),{resolutionScale:m,cropArea:{x:Math.round((g.x+s.left)*m),y:Math.round((g.y+s.top)*m),width:Math.round(g.width*m),height:Math.round(g.height*m)},outputScale:f,format:a,quality:n,children:o,rotation:l}}let Y=class extends Ve{constructor(e){super(e),this.components=["attribution","zoom"]}};r([h()],Y.prototype,"components",void 0),Y=r([x("esri.views.ui.2d.DefaultUI2D")],Y);const Ht=Y;var ht;let X=ht=class extends Me{constructor(e){super(e),this.color=new K([0,0,0,1])}clone(){return new ht(Re({color:this.color}))}};r([h({type:K,json:{write:!0}})],X.prototype,"color",void 0),X=ht=r([x("esri.webmap.background.ColorBackground")],X);const Vi=X;let Kt,Bt,Wt,Yt,Xt,Jt;async function Mi(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:a,Stage:n}]=await Promise.all([_(()=>import("./webglDeps-7085b7aa.js"),["assets/webglDeps-7085b7aa.js","assets/FramebufferObject-8b18fc0c.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/Program-77209250.js","assets/ProgramCache-f29c900e.js","assets/NestedMap-1b5db22e.js","assets/ShaderCompiler-77d0dcb6.js","assets/programUtils-f035fe8a.js","assets/ProgramTemplate-646e3fe5.js"]),_(()=>import("./mapViewDeps-437c1fb1.js"),["assets/mapViewDeps-437c1fb1.js","assets/calcite-8912bd40.js","assets/index-00759e4a.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/CIMResourceManager-f4862aa2.js","assets/Rasterizer-76d04c43.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-96bde6b1.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-4b2a86a0.js","assets/alignmentUtils-ae955d28.js","assets/definitions-3ddd14a8.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-df1a8f01.js","assets/quantizationUtils-b3b2ae2a.js","assets/floatRGBA-ca2b39ca.js","assets/rasterizingUtils-c992e204.js","assets/imageutils-68b5fcaa.js","assets/Container-0797c889.js","assets/DisplayObject-87c37b69.js","assets/enums-e2e92c86.js","assets/Texture-563cf5e5.js","assets/BufferPool-c2abe131.js","assets/enums-b1d611e3.js","assets/WGLContainer-9a32a1e6.js","assets/FramebufferObject-8b18fc0c.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLBrushVTLSymbol-a588e1a9.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/StyleDefinition-7d58136b.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/color-e324e445.js","assets/ShaderCompiler-77d0dcb6.js","assets/ProgramTemplate-646e3fe5.js","assets/Program-77209250.js","assets/MaterialKey-2c87dd06.js","assets/utils-8b171ac3.js","assets/heatmapTextureUtils-56fc7bff.js","assets/earcut-61f7b102.js","assets/VTLMaterialManager-18d63fe3.js","assets/enums-fb086c25.js","assets/programUtils-f035fe8a.js","assets/MagnifierPrograms-8114656e.js","assets/Matcher-6c362377.js","assets/TileStrategy-90354c21.js","assets/TileStore-9a3ccc75.js","assets/TileInfoView-9dfc6c79.js","assets/visualVariablesUtils-b968e7b0.js","assets/visualVariablesUtils-a5773450.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-1fd8939a.js","assets/ExpandedCIM-be73cc27.js","assets/devEnvironmentUtils-5002a058.js","assets/CircularArray-edd903b3.js","assets/webgl-debug-7f880832.js","assets/ComputedAttributeStorage-1643f27d.js","assets/arcadeTimeUtils-c565fdc8.js","assets/executionError-fb3f283a.js","assets/centroid-bf48eee6.js","assets/ZoomMomentumEstimator-ef57e6a4.js","assets/MaterialPrograms-eb26b2c2.js","assets/RenderingContext-0f21aa0e.js","assets/ProgramCache-f29c900e.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/basicInterfaces-7449a8bf.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-685c4cd4.js","assets/normalizeUtilsSync-3ea564a9.js","assets/projectionSupport-d23d7a2d.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b58ac101.js","assets/TiledDisplayObject-419c008b.js","assets/schemaUtils-595294e3.js","assets/util-2ff47657.js","assets/GraphicsView-d1a40b68.js","assets/GraphicContainer-f82c4282.js","assets/BaseGraphicContainer-cbc6f003.js","assets/FeatureContainer-6da0f2bb.js","assets/TileContainer-13a45e9d.js","assets/vec3f32-01c06d8d.js","assets/resources-7587d8f4.js","assets/requestImageUtils-d1ba3b36.js","assets/unitBezier-881ac1eb.js"])]);Bt=e,Wt=t,Yt=i,Xt=s,Jt=a,Kt=n}const Et=160;function Ri(e){return e&&e.declaredClass==="esri.Viewpoint"}let u=class extends De(Oe(ke(Xe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Pe({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new si(this),this._pePromise=null,this.floors=new $e,this.highlightOptions=new jt,this.inputManager=new Si({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Ft,this.type="2d",this.ui=new Ht,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Ut,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([S(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Et)},et),this.on("resize",t=>this._resizeHandler(t)),S(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),Ee()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new ti(this.featuresTilingScheme)}get initialExtentRequired(){var o;const{scale:e,constraints:t,center:i,viewpoint:s,extent:a}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!a&&(t!=null&&t.effectiveLODs||(n=-1),(!i||e===0&&n===-1)&&(!s||!P(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Ot()||(this._pePromise||(this._pePromise=Le().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=Tt(e.targetGeometry);return!!Ce(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var s;e===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return Di(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new T({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void M.getLogger(this.declaredClass).error(new b("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;St(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(S(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},et),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void M.getLogger(this.declaredClass).error(new b("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void M.getLogger(this.declaredClass).error(new b("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;ze(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;Ie(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;xt(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,i,s;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0));if(G("esri-2d-log-updating")){const a=this.allLayerViews.reduce((n,o)=>({...n,[o.layer.id]:!o.destroyed&&!("layerViews"in o)&&o.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(a)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new b("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):H(e.targetGeometry)&&(i=new b("mapview:invalid-viewpoint","geometry not defined"))}catch(a){i=new b("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:a})}if(i)return void M.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new F({targetGeometry:new T,scale:0,rotation:0});zt(s,t),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;xt(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Ne(()=>this.ready,t).then(()=>{var a;const i={animate:!0,...t},s=Ae(e,this);return(a=this.animation)==null||a.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});M.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=bt(e)?Vt(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,a=!1,n=null,o=null;t!=null&&t.include?Ct(t.include,Lt(this,p=>s.add(p),p=>{n||(n=new Set),n.add(p)},p=>s.add(p),()=>a=!0)):(a=!0,s=new Set(this.allLayerViews)),t!=null&&t.exclude&&Ct(t.exclude,Lt(this,p=>s.delete(p),p=>{o||(o=new Set),o.add(p)}));const l=this.allLayerViews.filter(p=>!p.suspended&&s.has(p)).reverse(),c=this.toMap(i);let d=[...a?this.graphicsView.hitTest(c).map(p=>({type:"graphic",graphic:p,layer:null,mapPoint:c})):[],...await Promise.all(l.map(p=>p.hitTest(c,i)).toArray())].filter(P).flat().filter(P);return n&&(d=d.filter(p=>!("graphic"in p)||!p.graphic||(n==null?void 0:n.has(lt(p.graphic))))),o&&(d=d.filter(p=>!("graphic"in p)||!p.graphic||(o==null?void 0:o.has(lt(p.graphic))))),{screenPoint:i,results:d}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Ze(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Ge(i,this._pixelFormat)}_createScreenshotPlan(e){e=e??{};const t=this.supersampleScreenshotsEnabled?Math.min(4,qe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(n=>{const o=this.allLayerViews.find(l=>l.layer.id===n.id);o&&"container"in o&&o.container&&i.push(o.container)})):i=this._stage.children;const{format:s,quality:a}=Ue(e.format,e.quality);return bi(e,t,this.size,this.padding,s,a,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=bt(e)?Vt(this,e):e,i=[0,0],[s,a]=this.state.toMap(i,[t.x,t.y]),n=this.spatialReference;return new T({x:s,y:a,spatialReference:n})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),U(i[0],i[1])}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return Pt.hasLayerViewModule(e)}importLayerView(e){return Pt.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(M.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=je(this.type);return G("safari")&&G("safari")<9&&(e=new b("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")})),P(e)?(M.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):Mi()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new tt),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,a=i.then(()=>{s()&&(this.animation=null)}).catch(o=>{throw s()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),o}),n=new Promise(o=>o(a));return t.when().catch(()=>{s()&&n.cancel&&n.cancel()}),n}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,a=e.then(n=>{if(Mt(t),i!==this._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=n,s.finish()});return this._cancellableGoTo(i,s,a)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<Et&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var k,ut,mt,gt;const{constraints:e,initialExtent:t,map:i,padding:s,size:a}=this;if(!e)return null;const n=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?o.zoom!==-1&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let l=null,c=null,d=0;const p=o.viewpoint&&o.viewpoint.rotation,m=o.viewpoint&&o.viewpoint.targetGeometry;P(m)&&(m.type==="extent"?l=m:m.type==="point"&&(c=m,d=o.viewpoint.scale));const f=o.extent||l||((ut=Tt((k=n==null?void 0:n.viewpoint)==null?void 0:k.targetGeometry))==null?void 0:ut.extent)||t,g=o.center||c||(f==null?void 0:f.center),O=o.scale||d||((mt=n==null?void 0:n.viewpoint)==null?void 0:mt.scale)||f&&Fe(f,[a[0]-s.left-s.right,a[1]-s.top-s.bottom]),Z=o.rotation||p||((gt=n==null?void 0:n.viewpoint)==null?void 0:gt.rotation)||0;return g&&O?new F({targetGeometry:g,scale:O,rotation:Z}):null}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation;if(!s)return Promise.resolve();const a=e.then(n=>{if(Mt(t),i!==this._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");return s.update(n),this.animationManager.animate(s,this.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,a)}_project(e,t){var a;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||(a=i.spatialReference)!=null&&a.imageCoordinateSystem||He(t,i.spatialReference))return e;const s=It(i,t);if(!s)throw new b("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return Ri(e)?(e.targetGeometry=s,e):s}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Ke(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){var l,c;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(d){M.getLogger(this.declaredClass).warn(new Rt("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:d})),e.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new T({x:0,y:0,spatialReference:this.spatialReference})}(c=this.constraints)==null||c.fit(e),this._set("state",new ri({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new Kt(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new Jt,this._magnifierView.magnifier=this.magnifier;const s=new Yt({view:this});this._set("labelManager",s);const a=new ii({view:this});this._set("animationManager",a);const n=new Xt({view:this,animationManager:a});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",d=>this.fatalError=d.error),S(()=>this.stationary,d=>i.stationary=d,z),S(()=>this.background,d=>{i.background=d,this._magnifierView.background=d},z),S(()=>this.magnifier,d=>this._magnifierView.magnifier=d,z),S(()=>this.renderingOptions,d=>i.renderingOptions=d,z),S(()=>this.highlightOptions,d=>i.highlightOptions=d,z),S(()=>this.state.id,()=>i.state=this.state,z)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:s,scale:a}=this.state.paddedViewState,n=new T({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",s),this._set("scale",a),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Qe(Be.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Bt({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Wt(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(H(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const l=t.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=l}const i=t.clone(),[s,a]=t.center;let n=null;try{n=this._project(new T({x:s,y:a,spatialReference:t.spatialReference}),e)}catch(l){Ot()||M.getLogger(this.declaredClass).warn(new Rt("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:n==null?void 0:n.toJSON(),spatialReference:e,error:l}))}n||(n=new T({x:0,y:0,spatialReference:e}));const o=St(new F({targetGeometry:new T,scale:0,rotation:0}),t.viewpoint,n);i.viewpoint=o;try{const c=[t.size[0]/2,t.size[1]/2],d=[c[0]+20,c[1]],p=t.toMap([0,0],d),{x:m,y:f}=this._project(new T({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=m,p[1]=f,i.toScreen(p,p);const g=We(c,p,d),O=Math.hypot(p[0]-c[0],p[1]-c[1])/20;!Number.isFinite(O)||Math.abs(O)>4?(o.rotation=0,o.targetGeometry=new T({x:0,y:0,spatialReference:e})):(o.scale*=O,o.scale>G("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints").constrain(o,void 0),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};u.type="2d",r([h({readOnly:!0})],u.prototype,"animationManager",void 0),r([h({constructOnly:!0})],u.prototype,"deactivatedWebGLExtensions",void 0),r([h({constructOnly:!0})],u.prototype,"debugWebGLExtensions",void 0),r([h({readOnly:!0})],u.prototype,"featuresTilingScheme",void 0),r([h({readOnly:!0})],u.prototype,"fullOpacity",void 0),r([h({readOnly:!0})],u.prototype,"graphicsTileStore",null),r([h()],u.prototype,"graphicsView",void 0),r([h({readOnly:!0})],u.prototype,"state",void 0),r([h()],u.prototype,"initialExtentRequired",null),r([h()],u.prototype,"labelManager",void 0),r([h({readOnly:!0})],u.prototype,"resourceManager",null),r([h({readOnly:!0})],u.prototype,"textureManager",null),r([h({readOnly:!0})],u.prototype,"mapViewNavigation",void 0),r([h({constructOnly:!0})],u.prototype,"renderCanvas",void 0),r([h()],u.prototype,"renderingOptions",void 0),r([h({readOnly:!0})],u.prototype,"rendering",void 0),r([h({constructOnly:!0})],u.prototype,"supersampleScreenshotsEnabled",void 0),r([h({readOnly:!0})],u.prototype,"supportsGround",void 0),r([h()],u.prototype,"_stationaryTimer",void 0),r([h()],u.prototype,"_defaultsFromMapSettings",null),r([h()],u.prototype,"_pePromise",void 0),r([h({readOnly:!0})],u.prototype,"typeSpecificPreconditionsReady",null),r([h()],u.prototype,"animation",null),r([h({type:Vi})],u.prototype,"background",null),r([h({value:null,type:T,dependsOn:["state.id","ready"]})],u.prototype,"center",null),r([h({type:Ut})],u.prototype,"constraints",null),r([h({value:null,type:Nt,dependsOn:["state.id","ready"]})],u.prototype,"extent",null),r([h()],u.prototype,"floors",void 0),r([h({type:jt})],u.prototype,"highlightOptions",void 0),r([h({readOnly:!0})],u.prototype,"inputManager",void 0),r([h()],u.prototype,"map",void 0),r([h({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],u.prototype,"padding",null),r([h()],u.prototype,"resizeAlign",void 0),r([h({readOnly:!0,dependsOn:["state.id"]})],u.prototype,"resolution",null),r([h({value:0,type:Number,dependsOn:["state.id","ready"]})],u.prototype,"rotation",null),r([h({value:0,type:Number,dependsOn:["state.id","ready"]})],u.prototype,"scale",null),r([h({constructOnly:!0})],u.prototype,"spatialReferenceLocked",void 0),r([h()],u.prototype,"stationary",null),r([h({type:Ft,readOnly:!0})],u.prototype,"timeline",void 0),r([h({readOnly:!0})],u.prototype,"type",void 0),r([h({readOnly:!0})],u.prototype,"updating",null),r([h({value:null,type:F,dependsOn:["state.id","ready"]})],u.prototype,"viewpoint",null),r([h({value:-1,dependsOn:["state.id","ready"]})],u.prototype,"zoom",null),r([h({readOnly:!0})],u.prototype,"navigating",null),r([h({type:Ht})],u.prototype,"ui",void 0),u=r([x("esri.views.MapView")],u);const Bi=u;function lt(e){var i,s;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((s=e.sourceLayer)==null?void 0:s.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function Lt(e,t,i,s,a){return n=>{if(n instanceof Ye){if(n.layer===e)a==null||a();else{const o=e.allLayerViews.find(l=>l.layer===n.layer);o&&(s==null||s(o))}i(lt(n))}else{const o=e.allLayerViews.find(l=>l.layer===n);o&&t(o)}}}function Ct(e,t){if(e)if(Dt(e))for(const i of e)if(Dt(i))for(const s of i)t(s);else t(i);else t(e)}function Di(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}export{Bi as _,jt as c,Ft as e,Vi as m};
