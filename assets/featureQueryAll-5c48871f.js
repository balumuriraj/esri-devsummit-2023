import{$ as s,g1 as c}from"./calcite-c5ae4991.js";async function x(e,r,i){r=r.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(r.maxRecordCountFactor=o(e));const n=f(e),u=e.capabilities.query.supportsPagination;r.start=0,r.num=n;let t=null;for(;;){const a=await e.source.queryFeaturesJSON(r,i);if(s(t)?t=a:t.features=t.features.concat(a.features),t.exceededTransferLimit=a.exceededTransferLimit,!u||!a.exceededTransferLimit)break;r.start+=n}return t}function f(e){return o(e)*p(e)}function p(e){return e.capabilities.query.maxRecordCount||2e3}function o(e){return e.capabilities.query.supportsMaxRecordCountFactor?c.MAX_MAX_RECORD_COUNT_FACTOR:1}export{f as a,x as t};
