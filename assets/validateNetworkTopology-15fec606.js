import{ha as u,kl as v,j9 as y,ep as c,a1 as g}from"./calcite-c5ae4991.js";import{p as S}from"./MediaLayerWebmap-d9efc23f.js";import"./index-9a6385f7.js";import"./originUtils-1469eeaf.js";import"./multiOriginJSONSupportUtils-c978f4c3.js";import"./featureQueryAll-5c48871f.js";import"./project-0e0370f9.js";import"./MapView-c3d00f71.js";import"./unitBezier-881ac1eb.js";import"./TileStrategy-6e83933b.js";import"./TileStore-bec0a021.js";import"./TileInfoView-c5645cd8.js";import"./Version-e2fa8281.js";async function U(a,t,e){var l;const o=u(a),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s={...i,returnEdits:!0,f:"json"},n=v({...o.query,...s}),r=y(n,{...e,method:"post"}),f=`${o.path}/validateNetworkTopology`,{data:p}=await c(f,r);if(!p)return null;const d=S.fromJSON(p);return d.serviceEdits=((l=d.serviceEdits)==null?void 0:l.map(m=>({layerId:m.id,editedFeatures:m.editedFeatures})))??[],d}async function V(a,t,e){if(!t.gdbVersion)throw new g("submit-validate-network-topology-job:missing-gdb-version","version is missing");const o=u(a),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s=y(o.query,{query:v({...i,returnEdits:!0,async:!0,f:"json"}),...e,method:"post"}),n=`${o.path}/validateNetworkTopology`,{data:r}=await c(n,s);return r?r.statusUrl:null}export{V as submitValidateNetworkTopologyJob,U as validateNetworkTopology};
