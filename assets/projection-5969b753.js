import{q,_ as w,z as x,jv as W,aq as z,Y as G,p as X,c2 as S,c6 as g,b5 as M,bu as O,bt as v,X as Z,ev as D,T as H,U as I,f as V,$ as E,dF as B,jw as L}from"./calcite-8912bd40.js";import{v as R,y as J,x as K}from"./quat-7b70e9a8.js";import{e as Y}from"./quatf64-f8f1c132.js";import{e as Q}from"./mat3f64-50f3b9f6.js";import{e as rr}from"./mat4f64-abdda1bb.js";import{c as _}from"./spatialReferenceEllipsoidUtils-afb35af9.js";import{i as u,T as y}from"./BufferView-379a78a4.js";import{t as er,r as N,o as j}from"./vec33-69c9e93b.js";function F(r=tr){return[r[0],r[1],r[2],r[3]]}function pr(r,e,o=F()){return q(o,r),o[3]=e,o}function Tr(r,e,o=F()){return w(o,r,e),x(o,o),o[3]=-W(r,e),o}function Pr(r,e,o=F()){return R(T,r,b(r)),R(h,e,b(e)),J(T,h,T),or(o,z(K(o,T)))}function Ar(r){return r}function b(r){return G(r[3])}function or(r,e){return r[3]=e,r}const tr=[0,0,1,0],T=Y(),h=Y();F();const $=X.getLogger("esri.geometry.support.meshUtils.normalProjection");function Fr(r,e,o,n,t){return l(n)?(d(i.TO_PCPF,u.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(o),n,u.fromTypedArray(t)),t):($.error("Cannot convert spatial reference to PCPF"),t)}function $r(r,e,o,n,t){return l(n)?(d(i.FROM_PCPF,u.fromTypedArray(r),y.fromTypedArray(e),y.fromTypedArray(o),n,u.fromTypedArray(t)),t):($.error("Cannot convert to spatial reference from PCPF"),t)}function dr(r,e,o){return S(r,e,0,o,_(e),0,r.length/3),o}function lr(r,e,o){return S(r,_(o),0,e,o,0,r.length/3),e}function Er(r,e,o){if(E(r))return e;const n=y.fromTypedArray(r),t=y.fromTypedArray(e);return er(t,n,o),e}function _r(r,e,o){if(E(r))return e;B(a,o);const n=u.fromTypedArray(r),t=u.fromTypedArray(e);return N(t,n,a),L(a)||j(t,t),e}function Cr(r,e,o){if(E(r))return e;B(a,o);const n=u.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=u.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(N(t,n,a),L(a)||j(t,t),r!==e)for(let f=3;f<r.length;f+=4)e[f]=r[f];return e}function gr(r,e,o,n,t){if(!l(n))return $.error("Cannot convert spatial reference to PCPF"),t;d(i.TO_PCPF,u.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),y.fromTypedArray(e),y.fromTypedArray(o),n,u.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function Mr(r,e,o,n,t){if(!l(n))return $.error("Cannot convert to spatial reference from PCPF"),t;d(i.FROM_PCPF,u.fromTypedArray(r,16),y.fromTypedArray(e),y.fromTypedArray(o),n,u.fromTypedArray(t,16));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function d(r,e,o,n,t,f){if(!e)return;const C=o.count,p=_(t);if(U(t))for(let s=0;s<C;s++)n.getVec(s,P),e.getVec(s,c),g(p,P,A,p),M(a,A),r===i.FROM_PCPF&&O(a,a),v(c,c,a),f.setVec(s,c);else for(let s=0;s<C;s++){n.getVec(s,P),e.getVec(s,c),g(p,P,A,p),M(a,A);const k=Z(o.get(s,1));let m=Math.cos(k);r===i.TO_PCPF&&(m=1/m),a[0]*=m,a[1]*=m,a[2]*=m,a[3]*=m,a[4]*=m,a[5]*=m,r===i.FROM_PCPF&&O(a,a),v(c,c,a),x(c,c),f.setVec(s,c)}return f}function l(r){return U(r)||nr(r)}function U(r){return r.isWGS84||D(r)||H(r)||I(r)}function nr(r){return r.isWebMercator}var i;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(i||(i={}));const P=V(),c=V(),A=rr(),a=Q();export{Mr as L,dr as M,Er as O,lr as R,Cr as V,F as a,Pr as b,pr as c,Ar as g,$r as h,Fr as j,gr as k,Tr as q,_r as v,b as x};
