import{ha as u,kl as v,j9 as y,ep as c,a1 as g}from"./calcite-8912bd40.js";import{p as S}from"./MediaLayerWebmap-fb15d850.js";import"./index-00759e4a.js";import"./originUtils-1469eeaf.js";import"./multiOriginJSONSupportUtils-c978f4c3.js";import"./featureQueryAll-47bc4c6c.js";import"./project-909a4219.js";import"./MapView-ee19e5d5.js";import"./unitBezier-881ac1eb.js";import"./TileStrategy-90354c21.js";import"./TileStore-9a3ccc75.js";import"./TileInfoView-9dfc6c79.js";import"./Version-aa0a1d91.js";async function U(a,t,e){var l;const o=u(a),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s={...i,returnEdits:!0,f:"json"},n=v({...o.query,...s}),r=y(n,{...e,method:"post"}),f=`${o.path}/validateNetworkTopology`,{data:p}=await c(f,r);if(!p)return null;const d=S.fromJSON(p);return d.serviceEdits=((l=d.serviceEdits)==null?void 0:l.map(m=>({layerId:m.id,editedFeatures:m.editedFeatures})))??[],d}async function V(a,t,e){if(!t.gdbVersion)throw new g("submit-validate-network-topology-job:missing-gdb-version","version is missing");const o=u(a),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s=y(o.query,{query:v({...i,returnEdits:!0,async:!0,f:"json"}),...e,method:"post"}),n=`${o.path}/validateNetworkTopology`,{data:r}=await c(n,s);return r?r.statusUrl:null}export{V as submitValidateNetworkTopologyJob,U as validateNetworkTopology};
