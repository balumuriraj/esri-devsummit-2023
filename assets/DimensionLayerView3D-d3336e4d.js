import{_ as V}from"./index-9a6385f7.js";import{e as t,y as n,a as w,R as a,j as c,ae as h,l as d,ba as u,a1 as p,af as _,ai as m,aj as v,$ as A,ak as f}from"./calcite-c5ae4991.js";import{n as D}from"./LayerView3D-1f5cccf1.js";import{u as T}from"./LayerView-d2d47806.js";const k=e=>{let s=class extends e{constructor(...i){super(...i),this.layer=null}get interactive(){return!!a(this.analysisView)&&this.analysisView.interactive}set interactive(i){a(this.analysisView)&&(this.analysisView.interactive=i)}get results(){return a(this.analysisView)?this.analysisView.results:new c}get selectedDimension(){return a(this.analysisView)?this.analysisView.selectedDimension:null}set selectedDimension(i){a(this.analysisView)&&(this.analysisView.selectedDimension=i)}async createLengthDimensions(i){if(!a(this.analysisView))throw h();await this.analysisView.createLengthDimensions(i)}};return t([n()],s.prototype,"layer",void 0),t([n()],s.prototype,"interactive",null),t([n({readOnly:!0})],s.prototype,"results",null),t([n()],s.prototype,"selectedDimension",null),t([n()],s.prototype,"analysisView",void 0),s=t([w("esri.views.layers.DimensionLayerView")],s),s},y="analysis-view-handles";let l=class extends D(k(T)){constructor(e){super(e),this.type="dimension-3d",this._analysisModule=null}initialize(){this.handles.add(d(()=>this.layer.source,e=>{this._destroyAnalysisView(),a(e)&&this._createAnalysisView(e)},u),y)}destroy(){this.handles.remove(y),this._destroyAnalysisView()}isUpdating(){return a(this._createAnalysisViewTask)||a(this.analysisView)&&this.analysisView.updating}async whenAnalysisView(){if(a(this.analysisView))return this.analysisView;if(a(this._createAnalysisViewTask))return this._createAnalysisViewTask.promise;throw new p("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")}_createAnalysisView(e){const s=_(async i=>(this.analysisView=await this._createAnalysisViewPromise(e,i),this._createAnalysisViewTask===s&&(this._createAnalysisViewTask=null),this.analysisView));this.addResolvingPromise(s.promise),this._createAnalysisViewTask=s}_destroyAnalysisView(){this.analysisView=m(this.analysisView),this._createAnalysisViewTask=v(this._createAnalysisViewTask)}async _createAnalysisViewPromise(e,s){let i=this._analysisModule;if(A(i)){const o=await this._loadAnalysisModule();this._analysisModule=o,i=o}const r=new i.default({analysis:e,view:this.view,parent:this});if(await r.when(),f(s))throw r.destroy(),h();return r}_loadAnalysisModule(){return V(()=>import("./DimensionAnalysisView3D-afedf533.js").then(e=>e.D),["assets/DimensionAnalysisView3D-afedf533.js","assets/calcite-c5ae4991.js","assets/index-9a6385f7.js","assets/index-5026a37a.css","assets/calcite-96fa36fd.css","assets/LineVisualElement-520cb14e.js","assets/MediaLayerVideo-b25b4fca.js","assets/sphere-5ce3b13c.js","assets/mat3f64-50f3b9f6.js","assets/mat4f64-abdda1bb.js","assets/quatf64-f8f1c132.js","assets/Util-2b929b00.js","assets/plane-6ecad71b.js","assets/spatialReferenceEllipsoidUtils-87122df3.js","assets/scaleUtils-a8d07219.js","assets/ElevationSamplerData-41a54d7d.js","assets/objectResourceUtils-8fb711c9.js","assets/devEnvironmentUtils-5002a058.js","assets/BufferView-bc307796.js","assets/vec33-164586fc.js","assets/DefaultMaterial_COLOR_GAMMA-941dbf6c.js","assets/types-e1c0a5bf.js","assets/enums-e2e92c86.js","assets/Version-e2fa8281.js","assets/quat-8dcd84de.js","assets/resourceUtils-527631ac.js","assets/basicInterfaces-7449a8bf.js","assets/Indices-84de656e.js","assets/NestedMap-1b5db22e.js","assets/requestImageUtils-67552ee5.js","assets/symbolColorUtils-14fb8f64.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/OrderIndependentTransparency-5f7257d7.js","assets/Texture-3d2bcec7.js","assets/FramebufferObject-d9042b3f.js","assets/VertexElementDescriptor-2925c6af.js","assets/InterleavedLayout-45bbbdfe.js","assets/vec3f32-01c06d8d.js","assets/Octree-65a3a6a2.js","assets/edgeProcessing-fca251f2.js","assets/deduplicate-54cc928a.js","assets/MeshComponent-9e26db57.js","assets/earcut-61f7b102.js","assets/imageUtils-c2d0d1ae.js","assets/projection-425e8064.js","assets/ZoomMomentumEstimator-f0d7cb62.js","assets/floatRGBA-2dd25736.js","assets/dehydratedFeatures-ce9ee959.js","assets/quantizationUtils-a15bd53f.js","assets/labelFormatUtils-2486d06e.js","assets/orientedBoundingBox-d2c06194.js","assets/quatf32-51a323b8.js","assets/SnappingCandidate-970faec6.js","assets/callExpressionWithFeature-94cb1131.js","assets/DefaultVertexAttributeLayouts-5f20d8dd.js","assets/geometryServiceUtils-b1997a16.js","assets/project-0e0370f9.js","assets/LercDecoder-25ed2639.js","assets/VectorTile-ade0a955.js","assets/enums-fb086c25.js","assets/config-1337d16e.js","assets/TiledDisplayObject-0268aa47.js","assets/DisplayObject-b5071d0a.js","assets/rasterUtils-0aabb0e8.js","assets/resources-4ce48b80.js","assets/workerHelper-33dafb63.js","assets/webgl-debug-7f880832.js","assets/RenderingContext-f0258ff2.js","assets/ProgramCache-ddf14e3e.js","assets/Program-2221c2b1.js","assets/MediaLayer-faedb24a.js","assets/MediaElementView-92573d58.js","assets/normalizeUtilsSync-f9670301.js","assets/resourceExtension-a1892050.js","assets/BoundsStore-32c0ea98.js","assets/PooledRBush-52d39e88.js","assets/prism-line-numbers-713161a8.js","assets/label2-e5a29f4c.js","assets/interactive-1de2e238.js","assets/loadable-6afd516d.js","assets/t9n-b59ffad1.js","assets/observers-c89705b8.js","assets/icon-179b3e31.js","assets/loader-dc9b20b1.js","assets/guid-51402ee7.js","assets/prism-line-numbers-7c5d72ff.css","assets/LengthDimension-f30ab776.js","assets/Segment-dbfb173b.js","assets/elevationInfoUtils-def3e352.js","assets/analysisViewUtils-ad794640.js","assets/ImageMaterial-b8486f1d.js","assets/Factory-7ff71f8e.js","assets/RightAngleQuadVisualElement-2c22a714.js","assets/VisualElementResources-de04f9e5.js","assets/PointVisualElement-e21f219e.js","assets/colorUtils-c0f43caf.js","assets/EditGeometryOperations-59135cd9.js","assets/QueryEngineResult-7bb9e34b.js","assets/WhereClause-19168e5f.js","assets/executionError-fb3f283a.js","assets/utils-d04d4fee.js","assets/generateRendererUtils-0781e0f0.js","assets/projectionSupport-c2c1f4b7.js","assets/json-48e3ea08.js","assets/utils-d27f2aa1.js","assets/dehydratedFeatureComparison-52788bbf.js","assets/RenderTexture-4c0a650d.js"])}};t([n()],l.prototype,"type",void 0),t([n()],l.prototype,"analysisView",void 0),t([n()],l.prototype,"_createAnalysisViewTask",void 0),l=t([w("esri.views.3d.layers.DimensionLayerView3D")],l);const P=l;export{P as default};
