import{U as f}from"./request-6fc81c4c.js";import{a as u}from"./Error-ec6249b9.js";import{r as g}from"./typedArrayUtil-4d7bb04c.js";async function P(n,r,o,t,a,s){let i=null;if(g(o)){const e=`${n}/nodepages/`,p=e+Math.floor(o.rootIndex/o.nodesPerPage);try{return{type:"page",rootPage:(await f(p,{query:{f:"json",token:t},responseType:"json",signal:s})).data,rootIndex:o.rootIndex,pageSize:o.nodesPerPage,lodMetric:o.lodSelectionMetricType,urlPrefix:e}}catch(c){g(a)&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",p,c),i=c}}if(!r)return null;const d=`${n}/nodes/`,l=d+(r&&r.split("/").pop());try{return{type:"node",rootNode:(await f(l,{query:{f:"json",token:t},responseType:"json",signal:s})).data,urlPrefix:d}}catch(e){throw new u("sceneservice:root-node-missing","Root node missing.",{pageError:i,nodeError:e,url:l})}}export{P as n};
