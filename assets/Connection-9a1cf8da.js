import{B as L}from"./cast-fcb46737.js";import{a as v,s as R}from"./Error-ec6249b9.js";import{p as J,a as f,v as w,C as A,j as T,r as j,A as W,f as C}from"./promiseUtils-1e54421e.js";import{e as D}from"./Queue-b7d3cd48.js";import{_}from"./preload-helper-3bce6601.js";import{a as V}from"./request-6fc81c4c.js";import{h as E,r as $}from"./typedArrayUtil-4d7bb04c.js";import{h as N}from"./string-a318751c.js";const B="20221121",H="f520630575ed53cf8b49e5f1492799065ee366e5";var h;(function(o){o[o.HANDSHAKE=0]="HANDSHAKE",o[o.OPEN=1]="OPEN",o[o.OPENED=2]="OPENED",o[o.RESPONSE=3]="RESPONSE",o[o.INVOKE=4]="INVOKE",o[o.ABORT=5]="ABORT",o[o.CLOSE=6]="CLOSE",o[o.OPEN_PORT=7]="OPEN_PORT",o[o.ON=8]="ON"})(h||(h={}));let Q=0;function K(){return Q++}function x(o){return o&&typeof o=="object"&&("result"in o||"transferList"in o)}function b(o){return o?typeof o=="string"?JSON.stringify({name:"message",message:o}):o.toJSON?JSON.stringify(o):JSON.stringify({name:o.name,message:o.message,details:o.details||{stack:o.stack}}):null}function M(o,e,t,s){if(e.type===h.OPEN_PORT)return void o.postMessage(e,[e.port]);if(e.type!==h.INVOKE&&e.type!==h.RESPONSE)return void o.postMessage(e);let r;if(x(t)?(r=P(t.transferList),e.data=t.result):(r=P(s),e.data=t),r){if(N("ff")){for(const i of r)if("byteLength"in i&&i.byteLength>267386880){const n="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case h.INVOKE:throw n;case h.RESPONSE:return void M(o,{type:h.RESPONSE,jobId:e.jobId,error:b(n)})}}}o.postMessage(e,r)}else o.postMessage(e)}function O(o){if(!o)return null;const e=o.data;return e?typeof e=="string"?JSON.parse(e):e:null}function P(o){if(!o||!o.length)return null;if(N("esri-workers-arraybuffer-transfer"))return o;const e=o.filter(t=>!F(t));return e.length?e:null}function F(o){return o instanceof ArrayBuffer||o&&o.constructor&&o.constructor.name==="ArrayBuffer"}const z={statsWorker:()=>_(()=>import("./statsWorker-8ae6f7f4.js"),["assets/statsWorker-8ae6f7f4.js","assets/geometry-b7901087.js","assets/ArrayPool-a8ee9378.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/Error-ec6249b9.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Ellipsoid-89682c5e.js","assets/Polyline-ff2d7c6b.js","assets/typeUtils-35750739.js","assets/jsonMap-7b8332c9.js","assets/screenUtils-410d12c0.js","assets/quantizationUtils-4dd81f85.js","assets/jsonUtils-229211af.js","assets/fieldUtils-7f54c4b1.js","assets/preload-helper-3bce6601.js","assets/arcadeOnDemand-281a01eb.js","assets/heatmapUtils-aaea3f32.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/vec4f64-e407da96.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js"]),geometryEngineWorker:()=>_(()=>import("./geometryEngineWorker-85b1ab98.js"),["assets/geometryEngineWorker-85b1ab98.js","assets/geometryEngineJSON-45c195fe.js","assets/geometryEngineBase-3dd302e0.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>_(()=>import("./CSVSourceWorker-84cf3038.js"),["assets/CSVSourceWorker-84cf3038.js","assets/geometry-b7901087.js","assets/ArrayPool-a8ee9378.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/Error-ec6249b9.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Ellipsoid-89682c5e.js","assets/Polyline-ff2d7c6b.js","assets/typeUtils-35750739.js","assets/jsonMap-7b8332c9.js","assets/request-6fc81c4c.js","assets/preload-helper-3bce6601.js","assets/asyncUtils-437defc4.js","assets/projection-290b739f.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/unitUtils-45d1147c.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/aaBoundingRect-193543b5.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/OptimizedFeature-4ab8d380.js","assets/FeatureStore-3cfbdfa3.js","assets/Evented-a45c8b0f.js","assets/aaBoundingBox-657a9b82.js","assets/featureConversionUtils-03a03f40.js","assets/jsonUtils-229211af.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BoundsStore-b9fa27cc.js","assets/PooledRBush-3e149119.js","assets/quickselect-322ec8e1.js","assets/optimizedFeatureQueryEngineAdapter-d72f082e.js","assets/centroid-5c988df3.js","assets/projectionSupport-aa5eaa0d.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/normalizeUtils-27e29a72.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/reactiveUtils-4dabbb80.js","assets/number-8d860409.js","assets/locale-30120714.js","assets/clientSideDefaults-8609abb2.js","assets/defaultsJSON-59981e75.js"]),EdgeProcessingWorker:()=>_(()=>import("./EdgeProcessingWorker-c56e593f.js"),["assets/EdgeProcessingWorker-c56e593f.js","assets/workerHelper-e756ac3a.js","assets/BufferView-903d1848.js","assets/vec2-528adfe4.js","assets/common-c186b691.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/vec4-790471c0.js","assets/InterleavedLayout-984d67b2.js","assets/types-e1c0a5bf.js","assets/edgeProcessing-f733ce76.js","assets/deduplicate-03981d62.js","assets/mathUtils-b4bb77e2.js","assets/VertexAttribute-9c5c630d.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/typedArrayUtil-4d7bb04c.js"]),ElevationSamplerWorker:()=>_(()=>import("./ElevationSamplerWorker-adf22d6b.js"),["assets/ElevationSamplerWorker-adf22d6b.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/PooledRBush-3e149119.js","assets/cast-fcb46737.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/quickselect-322ec8e1.js","assets/georeference-74362e92.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/mat3f64-c6305894.js","assets/mat4-44a0988f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/mat4f64-1e28eae0.js","assets/mat3-3fc68e72.js","assets/projection-290b739f.js","assets/preload-helper-3bce6601.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec4-790471c0.js","assets/SimpleObservable-23231131.js","assets/Polyline-ff2d7c6b.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/aaBoundingRect-193543b5.js","assets/zscale-89472cba.js","assets/quat-3d5eec2d.js","assets/quatf64-7fd38d64.js","assets/projection-a69d43d0.js","assets/BufferView-903d1848.js","assets/vec2-528adfe4.js","assets/vec33-e98769e8.js"]),FeatureServiceSnappingSourceWorker:()=>_(()=>import("./FeatureServiceSnappingSourceWorker-3970171a.js"),["assets/FeatureServiceSnappingSourceWorker-3970171a.js","assets/cast-fcb46737.js","assets/typedArrayUtil-4d7bb04c.js","assets/string-a318751c.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Evented-a45c8b0f.js","assets/reactiveUtils-4dabbb80.js","assets/HandleOwner-9b396af1.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/FeatureStore-3cfbdfa3.js","assets/aaBoundingBox-657a9b82.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/featureConversionUtils-03a03f40.js","assets/jsonUtils-229211af.js","assets/Polyline-ff2d7c6b.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BoundsStore-b9fa27cc.js","assets/PooledRBush-3e149119.js","assets/quickselect-322ec8e1.js","assets/optimizedFeatureQueryEngineAdapter-d72f082e.js","assets/centroid-5c988df3.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/request-6fc81c4c.js","assets/preload-helper-3bce6601.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/TileInfo-b0eb8c90.js","assets/TimeInfo-1d30dc7c.js","assets/TimeExtent-23e282b9.js","assets/Query-b96bcde0.js","assets/Field-61ec9870.js","assets/fieldType-f31285f7.js","assets/Clonable-545593ce.js","assets/ElevationInfo-215614d8.js","assets/lengthUtils-fa751420.js","assets/symbologySnappingCandidates-4d49a371.js","assets/LRUCache-64ec42ee.js","assets/asyncUtils-437defc4.js","assets/arcgisLayerUrl-c09f09b4.js","assets/persistableUrlUtils-5f719c3b.js","assets/pbfQueryUtils-4adda2cc.js","assets/pbf-0e99a620.js","assets/query-694f7287.js","assets/queryZScale-1481fa99.js","assets/byteSizeEstimations-f0cab514.js"]),GeoJSONSourceWorker:()=>_(()=>import("./GeoJSONSourceWorker-97dd6c5d.js"),["assets/GeoJSONSourceWorker-97dd6c5d.js","assets/request-6fc81c4c.js","assets/preload-helper-3bce6601.js","assets/Error-ec6249b9.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/promiseUtils-1e54421e.js","assets/asyncUtils-437defc4.js","assets/cast-fcb46737.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/jsonUtils-229211af.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/Polyline-ff2d7c6b.js","assets/featureConversionUtils-03a03f40.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-3cfbdfa3.js","assets/Evented-a45c8b0f.js","assets/aaBoundingBox-657a9b82.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/BoundsStore-b9fa27cc.js","assets/PooledRBush-3e149119.js","assets/quickselect-322ec8e1.js","assets/optimizedFeatureQueryEngineAdapter-d72f082e.js","assets/centroid-5c988df3.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/reactiveUtils-4dabbb80.js","assets/geojson-8e4c2449.js","assets/clientSideDefaults-8609abb2.js","assets/defaultsJSON-59981e75.js","assets/sourceUtils-77beff52.js","assets/fieldType-f31285f7.js"]),LercWorker:()=>_(()=>import("./LercWorker-1081e212.js"),["assets/LercWorker-1081e212.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js"]),MemorySourceWorker:()=>_(()=>import("./MemorySourceWorker-a40eea0a.js"),["assets/MemorySourceWorker-a40eea0a.js","assets/Error-ec6249b9.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/jsonUtils-229211af.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Ellipsoid-89682c5e.js","assets/Polyline-ff2d7c6b.js","assets/featureConversionUtils-03a03f40.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-3cfbdfa3.js","assets/Evented-a45c8b0f.js","assets/aaBoundingBox-657a9b82.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/BoundsStore-b9fa27cc.js","assets/PooledRBush-3e149119.js","assets/quickselect-322ec8e1.js","assets/optimizedFeatureQueryEngineAdapter-d72f082e.js","assets/centroid-5c988df3.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/preload-helper-3bce6601.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/reactiveUtils-4dabbb80.js","assets/clientSideDefaults-8609abb2.js","assets/defaultsJSON-59981e75.js","assets/sourceUtils-77beff52.js","assets/fieldType-f31285f7.js"]),PBFDecoderWorker:()=>_(()=>import("./PBFDecoderWorker-d705011c.js"),["assets/PBFDecoderWorker-d705011c.js","assets/compilerUtils-18d58939.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/cast-fcb46737.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/zscale-89472cba.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/dehydratedFeatures-0557137d.js","assets/byteSizeEstimations-f0cab514.js","assets/aaBoundingBox-657a9b82.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/quantizationUtils-4dd81f85.js","assets/jsonUtils-229211af.js","assets/Polyline-ff2d7c6b.js","assets/typeUtils-35750739.js","assets/Field-61ec9870.js","assets/enumeration-3a03bd31.js","assets/fieldType-f31285f7.js","assets/featureConversionUtils-03a03f40.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/pbfQueryUtils-4adda2cc.js","assets/pbf-0e99a620.js"]),Pipeline:()=>_(()=>import("./Pipeline-0be32bbb.js"),["assets/Pipeline-0be32bbb.js","assets/cast-fcb46737.js","assets/typedArrayUtil-4d7bb04c.js","assets/string-a318751c.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/HandleOwner-9b396af1.js","assets/reactiveUtils-4dabbb80.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/TileInfo-b0eb8c90.js","assets/jsonMap-7b8332c9.js","assets/unitUtils-45d1147c.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/preload-helper-3bce6601.js","assets/featureConversionUtils-03a03f40.js","assets/jsonUtils-229211af.js","assets/Polyline-ff2d7c6b.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/aaBoundingBox-657a9b82.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/request-6fc81c4c.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/FeatureStore2D-0d42a49b.js","assets/CircularArray-f4b6cd92.js","assets/Evented-a45c8b0f.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/diffUtils-68b89c71.js","assets/Collection-910b6f71.js","assets/FeatureSetReader-7e79a15e.js","assets/centroid-5c988df3.js","assets/arcgisLayerUrl-c09f09b4.js","assets/persistableUrlUtils-5f719c3b.js","assets/ogcFeatureUtils-c8684850.js","assets/geojson-8e4c2449.js","assets/clientSideDefaults-8609abb2.js","assets/defaultsJSON-59981e75.js","assets/fieldType-f31285f7.js","assets/query-694f7287.js","assets/pbfQueryUtils-4adda2cc.js","assets/pbf-0e99a620.js","assets/queryZScale-1481fa99.js","assets/ComputedAttributeStorage-2b4316ba.js","assets/enums-2658a65c.js","assets/visualVariablesUtils-0d4b5279.js","assets/screenUtils-410d12c0.js","assets/Utils-69cc114d.js","assets/number-954e4ab6.js","assets/enums-4ca4641f.js","assets/enums-64ab819c.js","assets/Texture-243be4d7.js","assets/context-util-a4ce3a7b.js","assets/VertexElementDescriptor-2925c6af.js","assets/visualVariablesUtils-ecd70012.js","assets/TimeExtent-23e282b9.js","assets/Query-b96bcde0.js","assets/Field-61ec9870.js","assets/Clonable-545593ce.js","assets/TileStore-00ac650f.js","assets/Queue-b7d3cd48.js","assets/TileKey-5aef17b6.js","assets/StreamFeatureManager-adf26b1c.js","assets/createConnection-37f8beca.js"]),PointCloudWorker:()=>_(()=>import("./PointCloudWorker-7a04c1e9.js"),["assets/PointCloudWorker-7a04c1e9.js","assets/typedArrayUtil-4d7bb04c.js","assets/quat-3d5eec2d.js","assets/mat3f64-c6305894.js","assets/quatf64-7fd38d64.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec3-e93e648f.js","assets/vec4-790471c0.js","assets/I3SBinaryReader-f4829435.js","assets/Error-ec6249b9.js","assets/string-a318751c.js","assets/VertexAttribute-9c5c630d.js","assets/vec3f32-c9aa289f.js","assets/projection-290b739f.js","assets/preload-helper-3bce6601.js","assets/mathUtils-b4bb77e2.js","assets/promiseUtils-1e54421e.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/Ellipsoid-89682c5e.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/Polyline-ff2d7c6b.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/aaBoundingRect-193543b5.js","assets/zscale-89472cba.js","assets/PointCloudWorkerUtil-831c5cd2.js","assets/PointCloudUniqueValueRenderer-b0367a06.js","assets/enumeration-3a03bd31.js","assets/LegendOptions-010d0873.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js"]),RasterWorker:()=>_(()=>import("./RasterWorker-0c3c8c10.js"),["assets/RasterWorker-0c3c8c10.js","assets/geometry-b7901087.js","assets/ArrayPool-a8ee9378.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/Error-ec6249b9.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Ellipsoid-89682c5e.js","assets/Polyline-ff2d7c6b.js","assets/typeUtils-35750739.js","assets/jsonMap-7b8332c9.js","assets/projection-290b739f.js","assets/preload-helper-3bce6601.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/unitUtils-45d1147c.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/aaBoundingRect-193543b5.js","assets/zscale-89472cba.js","assets/pixelUtils-d9cd2e49.js","assets/RasterSymbolizer-20e3598d.js","assets/colorUtils-0c057879.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/utils-421eb205.js","assets/enumeration-3a03bd31.js","assets/colorRamps-9dac42c1.js","assets/rasterProjectionHelper-a7452876.js","assets/dataUtils-a534a9c7.js"]),SceneLayerSnappingSourceWorker:()=>_(()=>import("./SceneLayerSnappingSourceWorker-9539e4b2.js"),["assets/SceneLayerSnappingSourceWorker-9539e4b2.js","assets/cast-fcb46737.js","assets/typedArrayUtil-4d7bb04c.js","assets/string-a318751c.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/lineSegment-10422ca0.js","assets/mathUtils-b4bb77e2.js","assets/vec4-790471c0.js","assets/sphere-2af0d852.js","assets/mat4-44a0988f.js","assets/vec4f64-e407da96.js","assets/byteSizeEstimations-f0cab514.js","assets/mat3f64-c6305894.js","assets/mat4f64-1e28eae0.js","assets/quatf64-7fd38d64.js","assets/vec2f64-30dc1443.js","assets/QueryEngineResult-8f90b8dc.js","assets/preload-helper-3bce6601.js","assets/Polyline-ff2d7c6b.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/quantizationUtils-4dd81f85.js","assets/jsonUtils-229211af.js","assets/ItemCache-fd3aceaf.js","assets/MemCache-18a255ed.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/jsonMap-7b8332c9.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/unitUtils-45d1147c.js","assets/SimpleObservable-23231131.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/aaBoundingRect-193543b5.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/featureConversionUtils-03a03f40.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/Octree-0a267ea2.js","assets/plane-b575face.js","assets/Util-a48361c6.js","assets/edgeProcessing-f733ce76.js","assets/deduplicate-03981d62.js","assets/InterleavedLayout-984d67b2.js","assets/BufferView-903d1848.js","assets/vec2-528adfe4.js","assets/types-e1c0a5bf.js","assets/VertexAttribute-9c5c630d.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>_(()=>import("./SceneLayerWorker-02654016.js").then(o=>o.S),["assets/SceneLayerWorker-02654016.js","assets/typedArrayUtil-4d7bb04c.js","assets/preload-helper-3bce6601.js","assets/assets-8d3e737a.js","assets/Error-ec6249b9.js","assets/string-a318751c.js","assets/request-6fc81c4c.js","assets/promiseUtils-1e54421e.js","assets/I3SNode-941d6d9e.js","assets/sphere-2af0d852.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/mat4-44a0988f.js","assets/vec4f64-e407da96.js","assets/nextTick-3ee5a785.js","assets/byteSizeEstimations-f0cab514.js","assets/mat3f64-c6305894.js","assets/mat4f64-1e28eae0.js","assets/quatf64-7fd38d64.js","assets/vec2f64-30dc1443.js"]),WFSSourceWorker:()=>_(()=>import("./WFSSourceWorker-e95612fd.js"),["assets/WFSSourceWorker-e95612fd.js","assets/asyncUtils-437defc4.js","assets/cast-fcb46737.js","assets/typedArrayUtil-4d7bb04c.js","assets/string-a318751c.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Extent-da876e26.js","assets/Ellipsoid-89682c5e.js","assets/featureConversionUtils-03a03f40.js","assets/jsonUtils-229211af.js","assets/Polyline-ff2d7c6b.js","assets/OptimizedFeature-4ab8d380.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-3cfbdfa3.js","assets/Evented-a45c8b0f.js","assets/aaBoundingBox-657a9b82.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/BoundsStore-b9fa27cc.js","assets/PooledRBush-3e149119.js","assets/quickselect-322ec8e1.js","assets/optimizedFeatureQueryEngineAdapter-d72f082e.js","assets/centroid-5c988df3.js","assets/projectionSupport-aa5eaa0d.js","assets/projection-290b739f.js","assets/preload-helper-3bce6601.js","assets/unitUtils-45d1147c.js","assets/jsonMap-7b8332c9.js","assets/SimpleObservable-23231131.js","assets/mat4-44a0988f.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/zscale-89472cba.js","assets/json-48e3ea08.js","assets/QueryEngine-cdb0ba2c.js","assets/MemCache-18a255ed.js","assets/normalizeUtils-27e29a72.js","assets/geometry-b7901087.js","assets/typeUtils-35750739.js","assets/QueryEngineResult-8f90b8dc.js","assets/quantizationUtils-4dd81f85.js","assets/ItemCache-fd3aceaf.js","assets/WhereClause-d4b8b019.js","assets/utils-b34fcd9d.js","assets/generateRendererUtils-7252b5e6.js","assets/colorRamps-9dac42c1.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/enumeration-3a03bd31.js","assets/Symbol-f93ed9fd.js","assets/SnappingCandidate-970faec6.js","assets/utils-511aa5f5.js","assets/fieldUtils-7f54c4b1.js","assets/arcadeOnDemand-281a01eb.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-3de56d7f.js","assets/FieldsIndex-f104cc5f.js","assets/Scheduler-540208b6.js","assets/reactiveUtils-4dabbb80.js","assets/geojson-8e4c2449.js","assets/sourceUtils-77beff52.js","assets/wfsUtils-db42dc81.js","assets/xmlUtils-444cb4c0.js","assets/Field-61ec9870.js","assets/fieldType-f31285f7.js"]),WorkerTileHandler:()=>_(()=>import("./WorkerTileHandler-0dbcb06b.js"),["assets/WorkerTileHandler-0dbcb06b.js","assets/promiseUtils-1e54421e.js","assets/string-a318751c.js","assets/typedArrayUtil-4d7bb04c.js","assets/Error-ec6249b9.js","assets/enums-0fc02184.js","assets/GeometryUtils-eebff0a0.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-ff072275.js","assets/enums-2658a65c.js","assets/Geometry-daada628.js","assets/pbf-0e99a620.js","assets/ArrayPool-a8ee9378.js","assets/TileClipper-4637f47d.js","assets/preload-helper-3bce6601.js","assets/assets-8d3e737a.js","assets/request-6fc81c4c.js","assets/GeometryUtils-c093d234.js","assets/StyleRepository-0c36ed5d.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/Color-fb64d77d.js","assets/colorUtils-639f4d25.js","assets/mathUtils-b4bb77e2.js","assets/vec3-e93e648f.js","assets/vec3f64-2f9cef06.js","assets/common-c186b691.js","assets/vec4-790471c0.js","assets/colorUtils-0c057879.js","assets/earcut-58237617.js","assets/BidiEngine-836b7ef6.js"])},{CLOSE:k,ABORT:y,INVOKE:I,RESPONSE:g,OPEN_PORT:S,ON:U}=h,G=2;class q{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===h.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class u{constructor(e,t,s){this._port=e,this._getNextJob=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new q(r=>this._onInvokeMessage(r)),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){const t=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new u(t.port1,{channel:t,client:s},()=>null);return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=r),u.clients.set(r,s),t.port2}static loadWorker(e){const t=z[e];return t?t():Promise.resolve(null)}close(){this._post({type:k}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,s){const r=s&&s.signal,i=s&&s.transferList;if(!this._port)return Promise.reject(new v("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const n=K();return new Promise((l,a)=>{if(J(r))return this._processWork(),void a(f());const p=w(r,()=>{const c=this._outJobs.get(n);c&&(this._outJobs.delete(n),this._processWork(),E(c.abortHandle),this._post({type:y,jobId:n}),a(f()))}),d={resolve:l,reject:a,abortHandle:p,debugInfo:e};this._outJobs.set(n,d),this._post({type:I,jobId:n,methodName:e,abortable:r!=null},t,i)})}on(e,t){const s=new MessageChannel;function r(i){t(i.data)}return this._port.postMessage({type:h.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",r),s.port1.start(),{remove(){s.port1.postMessage({type:h.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",r)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:S,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=G)return;const e=this._getNextJob();if(!e)return;const{methodName:t,data:s,invokeOptions:r,deferred:i}=e;this.invoke(t,s,r).then(n=>i.resolve(n)).catch(n=>i.reject(n))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{E(e.abortHandle),e.reject(f(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){$(this._schedule)?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const t=O(e);if(t)switch(t.type){case g:this._onResponseMessage(t);break;case I:this._invokeQueue.push(t);break;case y:this._onAbortMessage(t);break;case k:this._onCloseMessage();break;case S:this._onOpenPortMessage(t);break;case U:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,s=e.jobId,r=t.get(s);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&u.clients.get(this)===e&&e.destroy(),u.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:s,data:r,abortable:i}=e,n=i?new AbortController:null,l=this._inJobs;let a,p=this._client,d=p[t];try{if(!d&&t&&t.includes(".")){const c=t.split(".");for(let m=0;m<c.length-1;m++)p=p[c[m]],d=p[c[m+1]]}if(typeof d!="function")throw new TypeError(`${t} is not a function`);a=d.call(p,r,{client:this,signal:n?n.signal:null})}catch(c){return void this._post({type:g,jobId:s,error:b(c)})}A(a)?(l.set(s,{controller:n,promise:a}),a.then(c=>{l.has(s)&&(l.delete(s),this._post({type:g,jobId:s},c))},c=>{l.has(s)&&(l.delete(s),T(c)||this._post({type:g,jobId:s,error:b(c||{message:`Error encountered at method ${t}`})}))})):this._post({type:g,jobId:s},a)}_onOpenPortMessage(e){new u(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:t}=e,s=this._client.on(e.eventType,i=>{t.postMessage(i)}),r=j(e.port,"message",i=>{var n;((n=O(i))==null?void 0:n.type)===h.CLOSE&&(r.remove(),s.remove(),t.close())})}_onResponseMessage(e){const{jobId:t,error:s,data:r}=e,i=this._outJobs;if(!i.has(t))return;const n=i.get(t);i.delete(t),this._processWork(),E(n.abortHandle),s?n.reject(v.fromJSON(JSON.parse(s))):n.resolve(r)}_post(e,t,s){return M(this._port,e,t,s)}}u.kernelInfo={revision:H,version:V,buildDate:B},u.clients=new Map;class ne{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new D}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise((s,r)=>{let i=!0;const n=l=>{C(t.signal),i&&(i=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const a=e[l];A(a)?this._clientPromises[l]=a.then(p=>(this._clients[l]=new u(p,t,()=>this._ongoingJobsQueue.pop()??null),n(s),this._clients[l]),()=>(n(r),null)):(this._clients[l]=new u(a,t,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[l]=Promise.resolve(this._clients[l]),n(s))}})}broadcast(e,t,s){const r=new Array(this._clientPromises.length);for(let i=0;i<this._clientPromises.length;++i){const n=this._clientPromises[i];r[i]=n.then(l=>l==null?void 0:l.invoke(e,t,s))}return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(f(`Worker closing, aborting job calling '${e.methodName}'`));for(const t of this._clientPromises)t.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0}invoke(e,t,s){let r;Array.isArray(s)?(R.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:s}):r=s;const i=W();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:r,deferred:i});for(let n=0;n<this._clientPromises.length;n++){const l=this._clients[n];l?l.jobAdded():this._clientPromises[n].then(a=>a==null?void 0:a.jobAdded())}return i.promise}on(e,t){return Promise.all(this._clientPromises).then(()=>L(this._clients.map(s=>s.on(e,t))))}openPorts(){return new Promise(e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then(i=>{i&&(t[r]=i.openPort()),--s==0&&e(t)})})}get test(){return{numClients:this._clients.length}}}export{H as a,B as e,O as f,ne as h,M as o,K as r,b as s,h as t,u as w};
