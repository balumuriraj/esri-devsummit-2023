import{t as c,r as s,i as l}from"./typedArrayUtil-4d7bb04c.js";import{r as g}from"./ElevationInfo-215614d8.js";function v(t){return t?p:P}function h(t,e){return c(e)||!e.mode?v(t).mode:e.mode}function m(t,e){return s(e)?e:v(t)}function b(t,e){return h(!!s(t)&&t.hasZ,e)}function w(t,e){return m(!!s(t)&&t.hasZ,e)}function I(t){const e=Z(t),n=b(t.geometry,e);return{mode:n,offset:s(e)&&n!=="on-the-ground"?l(e.offset,0)*g(l(e.unit,"meters")):0}}function Z(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function z(t,e,n,o=null){return d(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,n,o)}function R(t,e,n,o,u=null){return d(t,e[0],e[1],e.length>2?e[2]:0,n,o,u)}function d(t,e,n,o,u,a,i=null){if(c(a))return;const r=s(i)?i.mode:"absolute-height";if(r==="on-the-ground")return 0;const{absoluteZ:f}=E(e,n,o,u,t,a);return y(f,e,n,o,u,t,i,r)}function E(t,e,n,o,u,a){const i=s(a.offset)?a.offset:0;switch(a.mode){case"absolute-height":return{absoluteZ:n+i,elevation:0};case"on-the-ground":{const r=l(u.elevationProvider.getElevation(t,e,0,o,"ground"),0);return{absoluteZ:r,elevation:r}}case"relative-to-ground":{const r=l(u.elevationProvider.getElevation(t,e,n,o,"ground"),0);return{absoluteZ:n+r+i,elevation:r}}case"relative-to-scene":{const r=l(u.elevationProvider.getElevation(t,e,n,o,"scene"),0);return{absoluteZ:n+r+i,elevation:r}}}}function y(t,e,n,o,u,a,i,r){const f=s(i)&&s(i.offset)?i.offset:0;switch(r){case"absolute-height":return t-f;case"relative-to-ground":return t-(l(a.elevationProvider.getElevation(e,n,o,u,"ground"),0)+f);case"relative-to-scene":return t-(l(a.elevationProvider.getElevation(e,n,o,u,"scene"),0)+f)}}function j(t,e){if(c(e))return!1;const{mode:n}=e;return s(n)&&(t==="scene"&&n==="relative-to-scene"||t==="ground"&&n!=="absolute-height")}const p={mode:"absolute-height",offset:0},P={mode:"on-the-ground",offset:null};function k(t,e){return t===e||s(t)&&s(e)&&t.mode===e.mode&&t.offset===e.offset}export{p as E,w as a,E as b,I as f,z as g,R as h,b as i,k as x,j as y};
