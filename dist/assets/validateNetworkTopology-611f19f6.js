import{U as c}from"./request-6fc81c4c.js";import{f,b as w,a as h}from"./normalizeUtils-27e29a72.js";import{e,y as r,n as j,l as N}from"./cast-fcb46737.js";import"./typedArrayUtil-4d7bb04c.js";import"./ArrayPool-a8ee9378.js";import"./preload-helper-3bce6601.js";import"./Error-ec6249b9.js";import"./string-a318751c.js";import"./promiseUtils-1e54421e.js";import"./Polyline-ff2d7c6b.js";import"./Extent-da876e26.js";import"./Ellipsoid-89682c5e.js";import"./jsonUtils-229211af.js";import"./geometry-b7901087.js";import"./typeUtils-35750739.js";import"./jsonMap-7b8332c9.js";import"./nextTick-3ee5a785.js";let t=class extends N{constructor(o){super(o),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null}};e([r({type:Date,json:{type:Number,write:{writer:(o,i)=>{i.moment=o?o.getTime():null}}}})],t.prototype,"moment",void 0),e([r({type:Boolean,json:{write:!0}})],t.prototype,"fullUpdate",void 0),e([r({type:Boolean,json:{write:!0}})],t.prototype,"validateErrorsCreated",void 0),e([r({type:Number,json:{write:!0}})],t.prototype,"dirtyAreaCount",void 0),e([r({type:Boolean,json:{write:!0}})],t.prototype,"exceededTransferLimit",void 0),e([r({type:[Object],json:{write:!0}})],t.prototype,"serviceEdits",void 0),t=e([j("esri.rest.networks.support.ValidateNetworkTopologyResult")],t);const E=t;async function I(o,i,l){const s=f(o),a=i.toJSON();i.validationSet&&(a.validationSet=JSON.stringify(i.validationSet));const m={...a,f:"json"},u=w({...s.query,...m}),y=h(u,{...l,method:"post"}),v=`${s.path}/validateNetworkTopology`,{data:n}=await c(v,y);if(!n)return null;const p=E.fromJSON(n);return p.serviceEdits=p.serviceEdits.map(d=>({layerId:d.id,editedFeatures:d.editedFeatures})),p}export{I as validateNetworkTopology};
