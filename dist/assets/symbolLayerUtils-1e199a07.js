import{_ as h}from"./preload-helper-3bce6601.js";import{U as d}from"./request-6fc81c4c.js";import{a as n}from"./Error-ec6249b9.js";import{e as b}from"./ItemCache-fd3aceaf.js";import{r as c,f as w}from"./typedArrayUtil-4d7bb04c.js";import{F as v,a as z}from"./aaBoundingBox-657a9b82.js";import{t as _,c as g}from"./symbolLayerUtils3D-76acc268.js";import"./string-a318751c.js";import"./promiseUtils-1e54421e.js";import"./MemCache-18a255ed.js";import"./cast-fcb46737.js";import"./ArrayPool-a8ee9378.js";import"./nextTick-3ee5a785.js";import"./Extent-da876e26.js";import"./Ellipsoid-89682c5e.js";import"./aaBoundingRect-193543b5.js";import"./mathUtils-b4bb77e2.js";import"./vec3-e93e648f.js";import"./vec3f64-2f9cef06.js";import"./common-c186b691.js";import"./vec4-790471c0.js";let s=a();function a(){return new b(50)}function M(){s=a()}function N(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function W(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return c(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-d556a033.js").then(l=>l.Q),["assets/objectResourceUtils-d556a033.js","assets/devEnvironmentUtils-5002a058.js","assets/typedArrayUtil-4d7bb04c.js","assets/mat3-3fc68e72.js","assets/common-c186b691.js","assets/mat3f64-c6305894.js","assets/mat4-44a0988f.js","assets/vec3f64-2f9cef06.js","assets/mat4f64-1e28eae0.js","assets/vec3-e93e648f.js","assets/aaBoundingBox-657a9b82.js","assets/Extent-da876e26.js","assets/cast-fcb46737.js","assets/string-a318751c.js","assets/Error-ec6249b9.js","assets/ArrayPool-a8ee9378.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-1e54421e.js","assets/Ellipsoid-89682c5e.js","assets/aaBoundingRect-193543b5.js","assets/mathUtils-b4bb77e2.js","assets/vec4-790471c0.js","assets/BufferView-903d1848.js","assets/vec2-528adfe4.js","assets/vec33-e98769e8.js","assets/DefaultMaterial_COLOR_GAMMA-fe26fda8.js","assets/types-e1c0a5bf.js","assets/request-6fc81c4c.js","assets/preload-helper-3bce6601.js","assets/asyncUtils-437defc4.js","assets/enums-64ab819c.js","assets/Version-2946cc03.js","assets/quat-3d5eec2d.js","assets/quatf64-7fd38d64.js","assets/compilerUtils-18d58939.js","assets/mat3f32-d3d088e8.js","assets/vec2f32-461e65a9.js","assets/byteSizeEstimations-f0cab514.js","assets/VisualVariablePassParameters-d460182b.js","assets/VertexAttribute-9c5c630d.js","assets/VertexElementDescriptor-2925c6af.js","assets/FramebufferObject-a3b9c52c.js","assets/Texture-243be4d7.js","assets/context-util-a4ce3a7b.js","assets/ShaderBuilder-a7d0da4e.js","assets/basicInterfaces-19ed850e.js","assets/ViewingMode-5d7d590b.js","assets/Util-a48361c6.js","assets/vec2f64-30dc1443.js","assets/vec4f64-e407da96.js","assets/sphere-2af0d852.js","assets/lineSegment-10422ca0.js","assets/Texture-46c8c2cb.js","assets/Evented-a45c8b0f.js","assets/TextureOnly.glsl-1ec9a9ef.js","assets/ScreenSpacePass-d5e48a9b.js","assets/Float4PassUniform-d7bdbc81.js","assets/Texture2DPassUniform-753de459.js","assets/assets-8d3e737a.js","assets/InterleavedLayout-984d67b2.js","assets/Matrix3PassUniform-ad9f953b.js","assets/MixExternalColor.glsl-ab0706f7.js","assets/ForwardLinearDepth.glsl-56affafd.js","assets/vec3f32-c9aa289f.js","assets/View.glsl-3ce196d4.js","assets/mat4f32-77b3d8ac.js","assets/ShaderTechniqueConfiguration-9f5b4555.js","assets/symbolColorUtils-b2b55883.js","assets/PhysicallyBasedRendering.glsl-d457fff5.js","assets/FloatPassUniform-68d54f51.js","assets/RgbaFloatEncoding.glsl-52af7fcf.js","assets/Texture2DDrawUniform-053796dc.js","assets/PiUtils.glsl-db6418ee.js","assets/Slice.glsl-3b39b1f7.js","assets/Transform.glsl-6d2e2fd9.js","assets/ObjectAndLayerIdColor.glsl-ad468647.js","assets/OutputDepth.glsl-470c8e2a.js","assets/OutputHighlight.glsl-fbac199a.js","assets/VisualVariables.glsl-2b937327.js","assets/DiscardOrAdjustAlphaBlend.glsl-73258f38.js","assets/AlphaCutoff-96178e0d.js","assets/TransparencyPassType-a11868d2.js","assets/Normals.glsl-76f97814.js","assets/EvaluateSceneLighting.glsl-189abc15.js","assets/SSAOBlur.glsl-8bf33b65.js","assets/ReadLinearDepth.glsl-9c87a54a.js","assets/SSAO.glsl-980b3771.js","assets/DefaultMaterial.glsl-885671b3.js","assets/VertexColor.glsl-8c022fa8.js","assets/VerticalOffset.glsl-87cbb2e3.js","assets/MultipassTerrainTest.glsl-bb236672.js","assets/DefaultTechniqueConfiguration-588e5ab2.js","assets/RealisticTree.glsl-b6cc03f2.js"]),m=await y.fetch(o,{disableTextures:!0});return s.put(o,m.referenceBoundingBox),m.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),c(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{M as clearBoundingBoxCache,p as computeIconLayerResourceSize,N as computeLayerResourceSize,W as computeLayerSize,f as computeObjectLayerResourceSize};
